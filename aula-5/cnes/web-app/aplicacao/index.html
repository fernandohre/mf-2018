<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8"/>
	<title>Estabelecimentos</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<link rel="stylesheet" type="text/css" href="css/estilo.css">
</head>
<body>
<!-- Conteúdo -->
	<!--<div class="tabela">-->
		<table class="tg">
		  <thead>
		    <tr>
		      <th>CNES</th>
		      <th>NOME</th>
		    </tr>
		  </thead>
		  <tbody id="tabela" >
		  	<script type="text/javascript">
		    	tabela.addEventListener('scroll', function(event)
				{
				    var element = event.target;
				    if (element.scrollHeight - element.scrollTop === element.clientHeight) {
				        console.log('Está caindo aqui. Desceu o scroll');
				        indice += 10;
				        $.getJSON('estabelecimentos.json', function(data){
				    		var tabela = document.getElementById("tabela");
				    		for (var i = indice - 10; i < indice; i++) {
				    			var linha = document.createElement("tr");
				    			var colunaCodigo = document.createElement("td");
				    			var colunaNome = document.createElement("td");

				    			colunaCodigo.innerHTML = data[i].codigo;
				    			colunaNome.innerHTML = data[i].razaoSocial;
				    			
				    			linha.appendChild(colunaCodigo);
				    			linha.appendChild(colunaNome);
				    			

				    			tabela.appendChild(linha);
				    		}
				    	});
				    }
				});
		    	//Para carregar a primeira vez
				$.getJSON('estabelecimentos.json', function(data){
					var tabela = document.getElementById("tabela");
					for (indice = 0; indice < 10; indice++) {
						var linha = document.createElement("tr");
						var colunaCodigo = document.createElement("td");
						var colunaNome = document.createElement("td");
						

						colunaCodigo.innerHTML = data[indice].codigo;
						colunaNome.innerHTML = data[indice].razaoSocial;
						
						linha.appendChild(colunaCodigo);
						linha.appendChild(colunaNome);
						

						tabela.appendChild(linha);
					}
				});
		    </script>
		  </tbody>
	<!--</div>-->
	
</table>
</body>
</html>

